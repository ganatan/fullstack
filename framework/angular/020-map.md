# angular-observable-transform

---

## Backend attendu

```http
GET http://localhost:3000/continents
```

Réponse :

```json
[
  { "id": 1, "name": "Africa" },
  { "id": 2, "name": "Europe" }
]
```

---

## Structure

```text
src/app/
├── services/
│   └── continents-api.ts
├── app.ts
└── app.html
```

---

## Code

### src/app/services/continents-api.ts

```ts
import { Injectable } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { Observable, map } from 'rxjs';

export type Continent = { id: number; name: string };

@Injectable({ providedIn: 'root' })
export class ContinentsApi {
  private readonly baseUrl = 'http://localhost:3000/continents';

  constructor(private http: HttpClient) {}

  list$(): Observable<string[]> {
    return this.http.get<Continent[]>(this.baseUrl).pipe(
      map(list => list.map(c => c.name))
    );
  }
}
```

---

### src/app/app.ts

```ts
import { Component, signal } from '@angular/core';
import { HttpClientModule } from '@angular/common/http';
import { CommonModule } from '@angular/common';
import { ContinentsApi } from './services/continents-api';

@Component({
  selector: 'app-root',
  imports: [HttpClientModule, CommonModule],
  templateUrl: './app.html'
})
export class App {
  readonly continents = signal<string[]>([]);
  readonly error = signal('');

  constructor(private api: ContinentsApi) {}

  onLoadContinents() {
    this.error.set('');
    this.api.list$().subscribe({
      next: data => this.continents.set(data),
      error: () => this.error.set('Erreur API')
    });
  }
}
```

---

### src/app/app.html

```html
<h1>angular-observable-transform</h1>

<button (click)="onLoadContinents()">Load</button>

<div *ngIf="error()">{{ error() }}</div>

<ul>
  @for (name of continents(); track name) {
    <li>{{ name }}</li>
  }
</ul>
```

---

## Lecture du flux

```text
HTTP GET
  ↓
Observable émet Continent[]
  ↓
map transforme en string[]
  ↓
Observable émet la nouvelle liste
```

---

## Point clé

- un seul flux HTTP
- un Observable
- map transforme la valeur émise
- le composant reçoit la donnée finale
